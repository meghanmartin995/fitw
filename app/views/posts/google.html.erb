<%# content_for :meta_title, "#{@offer.name} is on #{DEFAULT_META["meta_product_name"]}" %>
<%# content_for :meta_description, @offer.description %>
<%# content_for :meta_image, cl_image_path(@offer.photo.path) %>
<header class="index">
  <%= link_to new_post_path do %>
    <%= image_tag "logoxxxs.svg", class: "logo-eye" %>
  <% end %>

  <div class="filters toggle">

  </div>
<div class="search-index">
    <div class="free-squig">
      <%= link_to "Google Fonts", google_path, class: '' %>
      <%= image_tag("squig.svg", class:'animate__animated animate__fadeIn') %>
    </div>
      <%= link_to "Squarespace", squarespace_path, class: '' %>
      <%= link_to "Free fonts", free_path, class: 'free' %>
  <%= form_tag(posts_path, method: 'get', remote: true, class: "form-inline") do %>
<!--   <div id= "search-data" class="form-search search-data" data-articles="<%= @posts.to_json %>"> -->
  <div class="search">
    <%= search_field_tag :q_search, nil, autocomplete: :off, class: "form-control search-input", placeholder: "Search for fonts" %>
    <%#= button_tag "Reset", type: :reset %>
    <%= image_tag("search.svg") %>
    <!-- <p class="x">x</p> -->

  </div>
<!--   </div> -->
  <% end %>
  <%= image_tag("moon1.svg") %>
</div>

</header>

<section class="content">
  <% if @posts %>
  <div class="grid" id="posts">
    <div class="grid-sizer"></div>
      <% if @pg_results %>
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content" id="modal_content">
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
  <% @pg_results.each do |result| %>
    <% if result.searchable_type == 'Font' %>
        <% font = result.searchable %>
        <% font.posts.each do |post| %>
          <% if post.photo.attached? %>
            <%= link_to show_modal_path(id: post.id), remote: true do %>
              <div class="grid-item"><%= cl_image_tag post.photo.key %>
                <% font =  post.fonts.map(&:name).join ', '.titleize %>
              <div class="website-info">
                <p><%= font.titleize %></p>
                <% url = post&.url %>
                <% website = post&.website.titleize %>
                <%= link_to website, url, target: "_blank", class: "post-website" %>
              </div>
                <% end %>
              </div>
          <% end %>
        <% end %>
      <% end %>
    <% end %>
  <% else %>
  <% @posts.uniq.each do |post| %>
<div class="modal fade bd-example-modal-lgs" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content" id="modal_content">
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
    <% if post.photo.attached? %>
      <%= link_to show_modal_path(id: post.id), remote: true do %>
          <div class="grid-item"><%= cl_image_tag post.photo.key %>
            <% if post.fonts.present? %>
              <% font =  post.fonts.map(&:name).join ', '.titleize %>
              <div class="website-info">
                <p><%= font.titleize %></p>
                <% url = post&.url %>
                <% website = post&.website.titleize %>
                <%= link_to website, url, target: "_blank", class: "post-website" %>
              </div>
            <% end %>
          </div>
        <% end %>
      <% end %>
  <% end %>
<% end %>
  </div>
  <% end %>
</section>

<%= pagy_bootstrap_nav(@pagy).html_safe %>
