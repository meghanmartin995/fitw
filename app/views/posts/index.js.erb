function replacePosts (innerHTML) {
  // var container = document.querySelector('.grid')
  var masonry = Masonry.data('.grid')
  // //masonry.reloadItems();
  // imagesLoaded( container ).on( 'progress', function() {
  // // layout Masonry after each image loads
  //  masonry.layout();
  // });
  var elem = document.querySelector('.grid');
  imagesLoaded( elem ).on( 'progress', function() {

    masonry.layout()
    const posts = document.getElementById('posts');
    posts.innerHTML = innerHTML;
  })

}

if ('<%= @filter %>' === "[]") {
  replacePosts("<%= j render 'post', posts: Post.all %>");
}
else {
  replacePosts("<%= j render 'post', posts: @posts %>");

}


